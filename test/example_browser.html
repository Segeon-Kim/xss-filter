<!DOCTYPE html>
<html>
<head>
    <title>xssFilter Example For Browser-End</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style type="text/css">
        pre{
            background: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            line-height: 1.4em;
        }
    </style>
</head>
<body>
<h3 class="red">xssFilter</h3>
Testing Html String:<br>
<pre id="source">
    <!--
    <div class="like" ondblclick="takeme()" onmousedown="mousedown()">
        <div class="title">title</div>
        <div class="desc" onsubmit="load()">desc</div>
        <div>just</div>
        <style type="text">
            .red{color: #f00}
        </style>
        <script>alert(88)</script>
    </div>
    -->
</pre>
===================================<br>
Code:<br>
<pre>
var xss = new xssFilter();
//xss.options('fix_tag', false);
xss.options('escape', true);

var candy = xss.filter(testHTML);
</pre>
===================================<br>
Result:<br>
<pre id="preview"></pre>
<script src="../xssFilter.js"></script>
<script>
    var testHTML = '<div class ="like" ondblclick= "takeme(); return false" onmousedown="mousedown()">\n' +
                '\t<div class="title">title</div>\n' +
                '\t<div class="desc" onsubmit="load()">desc</div>\n' +
                '\t<div class="what" onsss="aaa">what</div>\n' +
                '\t<div>just</div>\n' +
                '\t<div class="some">\n' +
                    '\t\taaa\n' +
                    '\t\t<span  class ="aaa">\n' +
                        '\t\t\t<span class="bbb">bbb</span>\n' +
                        '\t\t\t<span class="ccc">\n' +
                            '\t\t\t\t<span class="ddd">ddd</span>\n' +
                        '\t\t\t</span>\n' +
                    '\t\t</span>\n' +
                    '\t\t<span class="eee">\n' +
                        '\t\t\t<span class="fff">fff</span>\n' +
                    '\t\t</span>\n' +
                '\t</div>\n' +
                '\t<style type="text">\n' +
                '\t\t.red{color: #f00}\n' +
                '\t</style>\n' +
                '\t<script>alert(88)<\/script>\n' +
        '</div>\n' +
        '<script>alert(99)<\/script>';

    var source = document.getElementById('source');
    var preview = document.getElementById('preview');

    source.innerHTML = testHTML.replace(/</g, '&lt;').replace(/>/g, '&gt;');

    var xss = new xssFilter();
    //xss.options('fix_tag', false);
    //xss.options('escape', true);
    xss.options({
        escape: true
    });

    xss.options('blackList_tags', {
        style: false,
        script: false
    });

    xss.options('blackList_attrs', {
        onsubmit: false,
        onsss: true,
        class: true
    });

    var candy = xss.filter(testHTML);
    console.log(candy);
    console.log(xss.config);
    preview.innerHTML = candy;

    var zz3 = /([\w-]+)\s*=\s*(["']?)([^"'= ]*)\2?/img;
    var REGEXP_ATTR = /<[a-zA-Z]+( ([^=<]+)=(["'])[^\3>]+\3)+>/img;
    var str3 = ' class ="like" ondblclick= "takeme(); return false" onmousedown="mousedown()" type=yyy noth="" data="dying"\n' +
                ' onmousedown="mousedown()"';
    var str4 = '<div class ="like" ondblclick= "takeme(); return false" onmousedown="mousedown()">';
    console.log(zz3.exec(str3));
    console.log(REGEXP_ATTR.exec(testHTML));


    console.log(str3.match(zz3));
    console.log(str4.match(zz3));

    zz3.lastIndex = 0;
    //console.log(zz3.exec(str4));
    var xx = str4.replace(zz3, function(a, b, c, d, e, f){
        console.log(a, b, c, d, e, f)
    });

</script>
</body>
</html>